<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bank">

<!-- 게시판(관리자, 회원) -->
<select id="selectBankList" parameterType="hashMap" resultType="hashMap">
<![CDATA[
	select
		row_number() over (ORDER BY bank_num ASC) rnum,
		BANK_NUM,
		BANK_KIND,
		BANK_TITLE,
		BANK_CONTENT,
		BANK_HITCOUNT,
		BANK_REGDATE
	from bank
	order by rnum desc
]]>
</select>

<!-- 글쓰기(관리자) -->
<insert id="insertBankWrite" parameterType="hashMap">
<![CDATA[
insert into bank(
        bank_num, 
        bank_kind, 
        bank_title, 
        bank_content, 
        bank_original_file1,
        bank_stored_file1,
        bank_original_file2,
        bank_stored_file2
) values (
        bank_num_seq.nextval,
        #{bank_kind},
        #{bank_title},
        #{bank_content},
        #{bank_original_file1},
        #{bank_stored_file1},
        #{bank_original_file2},
        #{bank_stored_file2}
)
]]>
</insert>

<!-- 상세보기(관리자, 회원) -->
<select id="selectBankDetail" parameterType="hashMap" resultType="hashMap">
<![CDATA[
       select * from bank where bank_num=#{num}
]]>
</select>

<!-- 조회수(회원) -->
<update id="updateHitCount" parameterType="hashMap">
<![CDATA[
	update bank 
	set
        bank_hitcount=nvl(bank_hitcount,0)+1
	where
        bank_num=#{bank_num}
]]>
</update>

<!-- 글 수정(관리자) -->
<update id="updateBankModify" parameterType="hashMap">
<![CDATA[
	update bank set                                
        bank_kind=#{bank_kind},                        
        bank_title=#{bank_title},                        
        bank_content=#{bank_content},                        
        bank_original_file1=#{bank_original_file1},                        
        bank_stored_file1=#{bank_stored_file1},                        
        bank_original_file2=#{bank_original_file2},                        
        bank_stored_file2=#{bank_stored_file2}                        
	where                                
        bank_num=#{num}                        
]]> 
</update>     

<!-- 글 삭제(관리자) -->
<delete id="deleteBank" parameterType="hashmap">
<![CDATA[
	delete from bank where bank_num=#{num}
]]>
</delete>                   

</mapper>